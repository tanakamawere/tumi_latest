package org.tmz.tumi.StartUp;import android.app.ProgressDialog;import android.os.Bundle;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.Button;import android.widget.EditText;import android.widget.Toast;import androidx.annotation.NonNull;import androidx.annotation.Nullable;import androidx.fragment.app.Fragment;import com.google.android.gms.tasks.OnCompleteListener;import com.google.android.gms.tasks.Task;import com.google.android.material.textfield.TextInputEditText;import com.google.firebase.database.DatabaseReference;import com.hbb20.CountryCodePicker;import org.tmz.tumi.R;import org.tmz.tumi.Utils.FirebaseMethods;import java.util.HashMap;import java.util.Objects;public class FragmentOneSetUp extends Fragment {    private static final String TAG = "SetBusinessInformationF";    private TextInputEditText name, address, email, description;    private EditText phone;    private CountryCodePicker codePicker;    private String phone1;    private ProgressDialog dialog;    @Nullable    @Override    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {        return inflater.inflate(R.layout.fragment_one_business_info, container, false);    }    @Override    public void onViewCreated(@NonNull final View view, @Nullable Bundle savedInstanceState) {        super.onViewCreated(view, savedInstanceState);        name = view.findViewById(R.id.registerBusinessNameEditText);        address = view.findViewById(R.id.registerBusinessAddressEditText);        phone = view.findViewById(R.id.registerBusinessPhoneNumberEditText);        email = view.findViewById(R.id.registerBusinessEmailEditText);        description = view.findViewById(R.id.registerBusinessDescriptionEditText);        dialog = new ProgressDialog(requireActivity());        dialog.setMessage(getString(R.string.pdPleaseWait));        dialog.setTitle(getString(R.string.pdUploading));        Button saveInfo = view.findViewById(R.id.saveBusinessInformationButton);        saveInfo.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                //Country Code picker                /*codePicker = view.findViewById(R.id.countryCodeHolder);                codePicker.registerCarrierNumberEditText(phone);                phone1 = codePicker.getFullNumberWithPlus();                saveInformation();                Log.e(TAG, "onClick: Phone Number with country code: " + phone1);*/            }        });    }    private void saveInformation() {        dialog.show();        String bsnName = name.getText().toString();        String bsnAddress = address.getText().toString();        String bsnEmail = email.getText().toString();        if (bsnName.isEmpty()) {            Toast.makeText(getActivity(), "Enter your business name", Toast.LENGTH_SHORT).show();        } else if (bsnAddress.isEmpty()) {            Toast.makeText(getActivity(), "Enter your business address", Toast.LENGTH_SHORT).show();        } else if (phone1.isEmpty()) {            Toast.makeText(getActivity(), "Enter your business phone number", Toast.LENGTH_SHORT).show();        } else {            final DatabaseReference rootReference = new FirebaseMethods().getDatabaseReference();            //Initial Business Details            HashMap<String, Object> businessDetails = new HashMap<>();            businessDetails.put("Name", bsnName);            businessDetails.put("Address", bsnAddress);            businessDetails.put("EmailAddress", bsnEmail);            businessDetails.put("PhoneNumber", phone1);            businessDetails.put("Key", new FirebaseMethods().getUserID());            businessDetails.put(getString(R.string.description), Objects.requireNonNull(description.getText()).toString());            rootReference.child(getString(R.string.fbBusinessInfo)).updateChildren(businessDetails).addOnCompleteListener(new OnCompleteListener<Void>() {                @Override                public void onComplete(@NonNull Task<Void> task) {                    if (task.isSuccessful()) {                        requireActivity().getSupportFragmentManager().beginTransaction()                                .replace(R.id.frameLayoutSplash, new FragmentTwoSetUp())                                .addToBackStack(null).commit();                        dialog.dismiss();                    } else {                        Toast.makeText(getActivity(), "Failed to upload user info successfully.", Toast.LENGTH_SHORT).show();                    }                }            });        }    }}